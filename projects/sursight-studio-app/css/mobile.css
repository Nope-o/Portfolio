/* ===== Mobile Responsive Styles ===== */

/* Tablet and below */
@media (max-width: 980px) {
  .main-grid {
    grid-template-columns: 1fr !important;
  }

  .card-pitch {
    height: 55vh;
  }
}

/* Mobile */
@media (max-width: 768px) {
  /* Hide desktop controls, show mobile toggle */
  .desktop-controls {
    display: none !important;
  }

  .mobile-controls-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Main grid - single column on mobile */
  .main-grid {
    grid-template-columns: 1fr !important;
    gap: var(--spacing-md);
  }

  /* Pitch Timeline full width above readout */
  .card-pitch {
    grid-column: 1;
    height: 50vh;
  }

  .card-readout {
    grid-column: 1;
  }

  /* ===== HORIZONTAL SCROLLABLE BUTTONS (like carousel) ===== */
  .action-buttons {
    width: 100%;
    display: flex;
    overflow-x: auto;
    overflow-y: hidden;
    gap: var(--spacing-sm);
    padding: 0 var(--spacing-xs) var(--spacing-xs);
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
    scrollbar-color: rgba(110, 231, 255, 0.3) transparent;
  }

  .action-buttons::-webkit-scrollbar {
    height: 4px;
  }

  .action-buttons::-webkit-scrollbar-track {
    background: transparent;
  }

  .action-buttons::-webkit-scrollbar-thumb {
    background: rgba(110, 231, 255, 0.3);
    border-radius: 2px;
  }

  .action-buttons .btn {
    flex: 0 0 auto;
    min-width: 70px;
    padding: 12px 16px;
    scroll-snap-align: start;
    white-space: nowrap;
  }

  /* Hide button text on mobile, show icons only */
  .btn-text {
    display: none;
  }

  .btn-icon {
    margin-right: 0;
  }

  /* ===== STATS GRID - 4 COLUMNS NO SCROLL ===== */
  .stats-scroll {
    display: grid !important;
    grid-template-columns: repeat(4, 1fr);
    gap: 6px;
    overflow-x: visible;
    padding-bottom: 0;
  }

  .stat-card {
    min-width: 0;
    padding: 10px 6px;
    flex: none;
  }

  .stat-icon {
    font-size: 20px;
    margin-bottom: 4px;
  }

  .stat-label {
    font-size: 9px;
    line-height: 1.2;
  }

  .stat-value {
    font-size: 14px;
    font-weight: 700;
  }

  /* ===== FREQ AND NOTE SIDE BY SIDE ===== */
  .freq-note-row {
    display: flex;
    gap: var(--spacing-md);
    align-items: flex-start;
    justify-content: space-between;
  }

  .freq-display {
    flex: 1;
    min-width: 0;
  }

  .freq-display .big {
    font-size: 28px;
    line-height: 1.2;
  }

  .note-display {
    flex: 0 0 auto;
    text-align: right;
  }

  .note-display .note {
    font-size: 28px;
    line-height: 1.2;
  }

  .note-display .sargam {
    font-size: 14px;
    margin-top: 2px;
  }

  .quality-indicator {
    font-size: 12px;
    margin-top: var(--spacing-xs);
  }

  .mic-power-strip {
    gap: 6px;
    margin-bottom: 10px;
  }

  .mic-metric {
    padding: 6px 8px;
    min-height: 50px;
    border-radius: 9px;
  }

  .metric-label {
    font-size: 9px;
    letter-spacing: 0.2px;
  }

  .metric-value {
    font-size: 14px;
  }

  .metric-bias {
    font-size: 10px;
  }

  .metric-hint {
    font-size: 8px;
  }

  /* Logo on mobile */
  .app-logo {
    height: 28px;
  }

  /* Control bar mobile layout */
  .control-bar {
    flex-direction: column;
    gap: var(--spacing-sm);
  }

  .app-site-footer {
    margin-bottom: 12px;
    padding: 0 var(--spacing-md);
    font-size: 11px;
    gap: 6px;
  }

  .footer-note {
    font-size: 10px;
  }

  /* Pitch timeline height */
  .card-pitch canvas {
    height: 100%;
  }

  #intonationHeatmap {
    height: 180px;
  }

  .advanced-empty-state {
    min-height: 122px;
    padding: 12px 10px;
  }

  .advanced-empty-state h4 {
    font-size: 14px;
  }

  .advanced-empty-state p {
    font-size: 11px;
  }

  .onboarding-tip {
    width: min(200px, calc(100vw - 16px));
    padding: 9px 9px 8px;
  }

  .onboarding-close {
    top: auto;
    bottom: 12px;
  }

  .card-subtitle {
    font-size: 11px;
    margin-bottom: 8px;
  }

  .heatmap-legend-inline {
    justify-content: flex-start;
    gap: 6px;
  }

  .legend-chip {
    font-size: 10px;
    padding: 3px 7px;
  }

  /* Show More button */
  #showMoreBtn {
    width: 100%;
    touch-action: manipulation;
  }

  /* Tabs - fit 3 tabs nicely */
  .tabs {
    display: flex;
    gap: var(--spacing-xs);
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }

  .tabs::-webkit-scrollbar {
    display: none;
  }

  .tab {
    flex: 1 1 auto;
    min-width: 0;
    padding: 10px 8px;
    font-size: 13px;
    white-space: nowrap;
  }

  #exercisesTab .tab-header {
    align-items: flex-start;
    flex-direction: column;
    gap: var(--spacing-sm);
  }

  .exercise-difficulty-picker {
    width: 100%;
    min-width: 0;
  }

  .exercise-difficulty-picker select {
    flex: 1;
    min-width: 0;
  }
}

/* Small mobile devices */
@media (max-width: 480px) {
  .app-logo {
    height: 24px;
  }

  .action-buttons .btn {
    min-width: 60px;
    padding: 10px 12px;
  }

  .stat-card {
    padding: 8px 4px;
  }

  .stat-icon {
    font-size: 18px;
  }

  .stat-label {
    font-size: 8px;
  }

  .stat-value {
    font-size: 13px;
  }

  .freq-display .big {
    font-size: 24px;
  }

  .note-display .note {
    font-size: 24px;
  }

  .note-display .sargam {
    font-size: 12px;
  }

  .mic-power-strip {
    grid-template-columns: 1fr 1fr;
  }

  .mic-metric-wide {
    grid-column: 1 / -1;
  }

  .app-site-footer {
    font-size: 10px;
  }
}

/* Landscape mobile */
@media (max-width: 768px) and (orientation: landscape) {
  .card-pitch {
    height: 70vh;
  }

  .practice-view {
    padding: var(--spacing-sm);
  }
}
